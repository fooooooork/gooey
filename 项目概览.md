# Gooey 项目概览

## 项目简介

**Gooey** 是一个强大的桌面应用程序，为 Claude Code 提供图形化界面。它基于 Tauri 2 构建，提供了管理 Claude Code 会话、创建自定义代理、跟踪使用情况等功能的美观 GUI。

Gooey 是 Claude Code 的命令中心，弥合了命令行工具与可视化体验之间的差距，使 AI 辅助开发更加直观和高效。

## 技术栈

### 前端技术
- **React 18** - 用户界面框架
- **TypeScript** - 类型安全的 JavaScript
- **Vite 6** - 快速构建工具和开发服务器
- **Tailwind CSS v4** - 实用优先的 CSS 框架
- **shadcn/ui** - 现代 UI 组件库
- **Framer Motion** - 动画库
- **Zustand** - 轻量级状态管理
- **React Hook Form** - 表单处理
- **Zod** - 数据验证

### 后端技术
- **Rust** - 系统级编程语言
- **Tauri 2** - 跨平台桌面应用框架
- **SQLite** - 嵌入式数据库
- **rusqlite** - Rust SQLite 绑定
- **tokio** - 异步运行时
- **serde** - 序列化/反序列化
- **reqwest** - HTTP 客户端

### 开发工具
- **Bun** - JavaScript 运行时和包管理器
- **PostHog** - 产品分析
- **Sharp** - 图像处理

## 启动方式

### 开发环境启动

1. **安装依赖**
   ```bash
   # 安装前端依赖
   bun install
   ```

2. **启动开发服务器**
   ```bash
   # 启动 Tauri 开发环境（推荐）
   bun run tauri dev
   
   # 或仅启动前端开发服务器
   bun run dev
   ```

3. **类型检查**
   ```bash
   bun run check
   ```

### 生产环境构建

1. **构建应用**
   ```bash
   # 生产构建
   bun run tauri build
   
   # 调试构建（更快编译，更大二进制文件）
   bun run tauri build --debug
   ```

2. **构建产物位置**
   - Linux: `src-tauri/target/release/`
   - macOS: `src-tauri/target/release/`
   - Windows: `src-tauri/target/release/`

### 系统要求

- **操作系统**: Windows 10/11, macOS 11+, 或 Linux (Ubuntu 20.04+)
- **内存**: 最少 4GB（推荐 8GB）
- **存储**: 至少 1GB 可用空间
- **必需工具**: Rust 1.70+, Bun, Git, Claude Code CLI

## 项目结构

```
gooey/
├── src/                          # React 前端
│   ├── components/               # UI 组件
│   │   ├── ui/                  # 基础 UI 组件
│   │   ├── claude-code-session/ # Claude 代码会话组件
│   │   ├── widgets/             # 小部件组件
│   │   └── *.tsx               # 功能组件
│   ├── contexts/                # React 上下文
│   │   ├── TabContext.tsx       # 标签页状态管理
│   │   └── ThemeContext.tsx     # 主题管理
│   ├── hooks/                   # 自定义 React Hooks
│   │   ├── useAnalytics.ts      # 分析追踪
│   │   ├── useTabState.ts       # 标签页状态
│   │   └── *.ts                # 其他 hooks
│   ├── lib/                     # 工具库和 API 客户端
│   │   ├── api.ts              # 后端 API 接口
│   │   ├── analytics/          # 分析相关
│   │   └── *.ts                # 工具函数
│   ├── services/                # 服务层
│   │   ├── sessionPersistence.ts # 会话持久化
│   │   └── tabPersistence.ts    # 标签页持久化
│   ├── stores/                  # 状态管理
│   │   ├── sessionStore.ts      # 会话状态
│   │   └── agentStore.ts        # 代理状态
│   ├── types/                   # TypeScript 类型定义
│   │   └── hooks.ts            # Hooks 类型
│   ├── App.tsx                  # 主应用组件
│   └── main.tsx                 # 应用入口点
├── src-tauri/                   # Rust 后端
│   ├── src/
│   │   ├── commands/            # Tauri 命令处理器
│   │   │   ├── agents.rs        # 代理管理命令
│   │   │   ├── claude.rs        # Claude 相关命令
│   │   │   ├── mcp.rs          # MCP 服务器命令
│   │   │   ├── usage.rs         # 使用统计命令
│   │   │   └── *.rs            # 其他命令
│   │   ├── checkpoint/          # 时间线管理
│   │   │   ├── state.rs         # 检查点状态
│   │   │   ├── manager.rs       # 检查点管理器
│   │   │   └── *.rs            # 检查点相关
│   │   ├── process/             # 进程管理
│   │   │   ├── registry.rs      # 进程注册表
│   │   │   └── mod.rs          # 进程模块
│   │   ├── claude_binary.rs     # Claude 二进制管理
│   │   ├── lib.rs              # 库入口
│   │   └── main.rs             # 主程序入口
│   ├── capabilities/            # Tauri 权限配置
│   │   └── default.json        # 默认权限
│   ├── icons/                   # 应用图标
│   ├── tests/                   # Rust 测试
│   ├── Cargo.toml              # Rust 依赖配置
│   ├── tauri.conf.json         # Tauri 配置
│   └── build.rs                # 构建脚本
├── cc_agents/                   # 预构建的 AI 代理
│   ├── git-commit-bot.claudia.json    # Git 提交机器人
│   ├── security-scanner.claudia.json  # 安全扫描器
│   ├── unit-tests-bot.claudia.json    # 单元测试机器人
│   └── README.md               # 代理说明
├── scripts/                     # 构建脚本
│   └── bump-version.sh         # 版本更新脚本
├── public/                      # 公共资源
│   ├── tauri.svg               # Tauri 图标
│   └── vite.svg                # Vite 图标
├── package.json                # Node.js 依赖配置
├── vite.config.ts              # Vite 配置
├── tsconfig.json               # TypeScript 配置
└── README.md                   # 项目说明
```

## 核心功能模块

### 1. 项目管理
- **项目浏览器**: 可视化浏览 `~/.claude/projects/` 中的所有项目
- **会话历史**: 查看和恢复过去的编码会话
- **智能搜索**: 快速查找项目和会话
- **会话洞察**: 显示首条消息、时间戳和会话元数据

### 2. CC 代理系统
- **自定义 AI 代理**: 创建具有自定义系统提示和行为的专业代理
- **代理库**: 为不同任务构建专用代理集合
- **后台执行**: 在独立进程中运行代理，实现非阻塞操作
- **执行历史**: 跟踪所有代理运行，包含详细日志和性能指标

### 3. 使用分析仪表板
- **成本跟踪**: 实时监控 Claude API 使用情况和成本
- **Token 分析**: 按模型、项目和时间段的详细分解
- **可视化图表**: 显示使用趋势和模式的美观图表
- **数据导出**: 导出使用数据用于会计和分析

### 4. MCP 服务器管理
- **服务器注册表**: 从中央 UI 管理模型上下文协议服务器
- **简单配置**: 通过 UI 添加服务器或从现有配置导入
- **连接测试**: 在使用前验证服务器连接
- **Claude Desktop 导入**: 从 Claude Desktop 导入服务器配置

### 5. 时间线和检查点
- **会话版本控制**: 在编码会话的任何时点创建检查点
- **可视化时间线**: 通过分支时间线导航会话历史
- **即时恢复**: 一键跳回任何检查点
- **分叉会话**: 从现有检查点创建新分支
- **差异查看器**: 查看检查点之间的确切变化

### 6. CLAUDE.md 管理
- **内置编辑器**: 直接在应用内编辑 CLAUDE.md 文件
- **实时预览**: 实时查看 Markdown 渲染
- **项目扫描器**: 在项目中查找所有 CLAUDE.md 文件
- **语法高亮**: 完整的 Markdown 支持和语法高亮

## 架构设计

### 前后端通信
- 使用 Tauri 的 `invoke` API 进行前后端通信
- 所有后端功能通过 Rust 命令暴露给前端
- 类型安全的 API 接口，确保前后端数据一致性

### 状态管理
- **Zustand**: 轻量级状态管理，用于全局状态
- **React Context**: 用于主题和标签页状态
- **本地存储**: 用于用户设置和缓存

### 数据持久化
- **SQLite**: 用于存储代理、使用统计、设置等数据
- **文件系统**: 用于项目文件和会话数据
- **本地存储**: 用于前端缓存和临时数据

### 安全设计
- **权限控制**: 通过 Tauri 的 capabilities 系统控制文件系统访问
- **CSP 策略**: 内容安全策略防止 XSS 攻击
- **进程隔离**: 代理在独立进程中运行，确保安全性

## 开发规范

### 代码风格
- 使用 TypeScript 严格模式
- 遵循 ESLint 和 Prettier 配置
- 组件使用函数式组件和 Hooks
- 优先使用 `var` 声明非基础数据类型变量

### 项目规范
- 所有依赖版本在父级配置文件中统一管理
- 使用依赖注入模式
- 遵循单一返回原则，方法内提前定义结果变量
- 代码应具备良好设计，结构清晰

### 质量保证
- 每次代码修改后确保编译通过
- 执行代码格式化
- 生成新代码时删除无用的旧代码，保持简洁
- 重构时统一删除旧代码，不做兼容逻辑

## 构建和部署

### 开发环境
```bash
# 安装依赖
bun install

# 启动开发服务器
bun run tauri dev

# 类型检查
bun run check
```

### 生产构建
```bash
# 构建应用
bun run tauri build

# 构建产物包括：
# - 可执行文件
# - 安装包（.deb, .dmg, .msi 等）
```

### 版本管理
```bash
# 使用脚本更新版本
./scripts/bump-version.sh 1.0.0
```

## 总结

Gooey 是一个功能丰富的桌面应用程序，为 Claude Code 提供了完整的图形化界面。它采用现代化的技术栈，具有良好的架构设计和开发规范，能够有效提升 AI 辅助开发的效率和用户体验。

项目结构清晰，模块化程度高，便于维护和扩展。通过 Tauri 框架实现了跨平台支持，同时保证了应用的性能和安全性。
